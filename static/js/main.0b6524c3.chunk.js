(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{157:function(t,e,a){},285:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(10),o=a.n(s);a(157),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(98);var c,r,d=a(322),l=a(323),u=a(324),j=a(317),b=a(326),f=a(320),p=a(327),O=a(328),h=a(325),g=a(321),m=a(287),k=a(16),T=a(25),x=a(329),y=a(318),v=a(3),C=i.a.memo((function(t){console.log("Add item form");var e=Object(n.useState)(null),a=Object(T.a)(e,2),i=a[0],s=a[1],o=Object(n.useState)(""),c=Object(T.a)(o,2),r=c[0],d=c[1],l=Object(n.useCallback)((function(t){i&&s(null),d(t.currentTarget.value)}),[r,i]),u=Object(n.useCallback)((function(){var e=r.trim();e?t.addItem(e):s("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0432\u043e\u0434\u0430"),d("")}),[r,t.addItem,i]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(x.a,{value:r,onChange:l,onKeyPress:function(t){"Enter"===t.key&&u()},variant:"outlined",label:"Title",error:!!i,helperText:i,disabled:t.disabled}),Object(v.jsx)(j.a,{onClick:u,color:"primary",disabled:t.disabled,children:Object(v.jsx)(y.a,{})})]})})),L=i.a.memo((function(t){console.log("add editable span");var e=Object(n.useState)(!1),a=Object(T.a)(e,2),i=(a[0],a[1]),s=Object(n.useState)(t.title),o=Object(T.a)(s,2),c=o[0],r=o[1],d=Object(n.useState)(!1),l=Object(T.a)(d,2),u=l[0],j=l[1];return u?Object(v.jsx)(x.a,{color:"primary",variant:"standard",value:c,autoFocus:!0,onBlur:function(){j(!1),c.trim()?t.changeTitle(c):i(!0)},onChange:function(t){r(t.currentTarget.value),i(!1)}}):Object(v.jsx)("span",{"aria-disabled":"loading"===t.entityTaskStatus,onDoubleClick:function(){return"loading"!==t.entityTaskStatus&&j(!0)},children:t.title})})),D=a(319),I=a(20),S=a(91),A=a.n(S),w=a(134),z=a(73),F=a.n(z),E=F.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"a40d8e19-8ad7-4404-b77e-7dea185478ff"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var M=function(){return E.get("todo-lists")},N=function(t){return E.post("todo-lists",{title:t})},R=function(t,e){return E.put("todo-lists/".concat(t),{title:e})},U=function(t){return E.delete("todo-lists/".concat(t))},q=function(t){return E.get("/todo-lists/".concat(t,"/tasks"))},P=function(t,e){return E.post("/todo-lists/".concat(t,"/tasks"),{title:e})},B=function(t,e,a){return E.put("/todo-lists/".concat(t,"/tasks/").concat(a),e).then((function(t){return console.log(t),t}))},G=function(t,e){return E.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},H=function(t){return E.post("/auth/login",t)},J=a(28),W=Object(J.b)({name:"AppSlice",initialState:{status:"idle",error:null},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error}}}),K=W.actions,V=K.setAppStatusAC,$=K.setAppErrorAC,Q=W.reducer,X=function(t,e){t.messages.length?e($({error:t.messages[0]})):e($({error:"Some error occurred"})),e(V({status:"failed"}))},Y=function(t,e){e($({error:t.message})),e(V({status:"failed"}))},Z=Object(J.b)({name:"ToDoListSlice",initialState:[],reducers:{changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.idToDoList}));t[a].entityStatys=e.payload.entityStatys},GetToDoListsAT:function(t,e){return e.payload.ApiToDoLists.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{filter:"all",entityStatys:"idle"})}))},ChangeToDoListFilterAT:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.toDoListID}));t[a].filter=e.payload.newFiltervalue},ChangeToDoListTitleAT:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.toDoListID}));t[a].title=e.payload.title},AddToDoListAT:function(t,e){t.unshift({id:e.payload.idToDoList,title:e.payload.title,filter:"all",addedDate:"",order:0,entityStatys:"idle"})},RemoveToDoListAT:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.toDoListID}));-1!==a&&t.splice(a,1)},ClearToDoAT:function(t,e){return[]}}}),_=Z.actions,tt=_.changeTodolistEntityStatusAC,et=_.GetToDoListsAT,at=_.ChangeToDoListFilterAT,nt=_.ChangeToDoListTitleAT,it=_.AddToDoListAT,st=_.RemoveToDoListAT,ot=_.ClearToDoAT,ct=Z.reducer,rt=Object(J.b)({name:"TaskSlice",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolostId].findIndex((function(t){return t.id===e.payload.taskId}));-1!==a&&t[e.payload.todolostId].splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(Object(I.a)(Object(I.a)({},e.payload.task),{},{entityTaskStatus:"idle"}))},changeEntityTaskStatusAC:function(t,e){var a=t[e.payload.toDoListId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(t[e.payload.toDoListId][a]=Object(I.a)(Object(I.a)({},t[e.payload.toDoListId][a]),{},{entityTaskStatus:e.payload.entityTaskStatus}))},updateTaskAC:function(t,e){var a=t[e.payload.toDoListId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(t[e.payload.toDoListId][a]=Object(I.a)(Object(I.a)({},t[e.payload.toDoListId][a]),e.payload.model))},getTasksAC:function(t,e){t[e.payload.toDoListId]=e.payload.obj.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{entityTaskStatus:"idle"})}))}},extraReducers:function(t){t.addCase(it,(function(t,e){t[e.payload.idToDoList]=[]})),t.addCase(et,(function(t,e){e.payload.ApiToDoLists.forEach((function(e){t[e.id]=[]}))})),t.addCase(st,(function(t,e){delete t[e.payload.toDoListID]})),t.addCase(ot,(function(t,e){return{}}))}}),dt=rt.actions,lt=dt.getTasksAC,ut=dt.updateTaskAC,jt=dt.addTaskAC,bt=dt.changeEntityTaskStatusAC,ft=dt.removeTaskAC,pt=rt.reducer,Ot=function(t,e,a){return function(n,i){var s=i().tasks[t].find((function(t){return t.id===e}));if(s){var o=Object(I.a)({title:s.title,description:s.description,status:s.status,priority:s.priority,startDate:s.startDate,deadline:s.deadline,entityTaskStatus:s.entityTaskStatus},a);n(V({status:"loading"})),n(bt({toDoListId:t,taskId:e,entityTaskStatus:"loading"})),B(t,o,e).then((function(i){0===i.data.resultCode?(n(ut({toDoListId:t,taskId:e,model:a})),n(V({status:"succeeded"})),n(bt({toDoListId:t,taskId:e,entityTaskStatus:"succeeded"}))):X(i.data,n)})).catch((function(t){Y(t.message,n)}))}else console.warn("task not found in the state")}},ht=a(333),gt=i.a.memo((function(t){console.log("add task");var e=Object(n.useCallback)((function(e){var a=e.currentTarget.checked?c.Completed:c.New;t.chahgeTaskStatus(t.idTodolist,t.task.id,a)}),[t.idTodolist,t.task.id]),a=Object(n.useCallback)((function(e){return t.chahgeTaskTitle(t.idTodolist,t.task.id,e)}),[t.idTodolist,t.task.id]),i=Object(n.useCallback)((function(){return t.removeTask(t.idTodolist,t.task.id)}),[t.idTodolist,t.task.id]);return Object(v.jsxs)("li",{children:[Object(v.jsx)(ht.a,{color:"primary",onChange:e,checked:t.task.status==c.Completed,disabled:"loading"===t.task.entityTaskStatus}),Object(v.jsx)(L,{title:t.task.title,changeTitle:a,entityTaskStatus:t.task.entityTaskStatus}),Object(v.jsx)(j.a,{onClick:i,disabled:"loading"===t.task.entityTaskStatus,children:Object(v.jsx)(D.a,{})})]},t.task.id)})),mt=i.a.memo((function(t){console.log("ToDoList");var e=Object(k.c)((function(t){return t.todolists})),a=Object(k.b)();Object(n.useEffect)((function(){var e;a((e=t.id,function(t){t(V({status:"loading"})),q(e).then((function(a){t(lt({toDoListId:e,obj:a.data.items})),t(V({status:"succeeded"}))}))}))}),[e]);var i=t.allTask,s=i;"active"==t.filter&&(s=i.filter((function(t){return t.status===c.New}))),"completed"===t.filter&&(s=i.filter((function(t){return t.status===c.Completed})));var o=s.map((function(e){return Object(v.jsx)(gt,{idTodolist:t.id,task:e,chahgeTaskStatus:t.chahgeTaskStatus,chahgeTaskTitle:t.chahgeTaskTitle,removeTask:t.removeTask},e.id)})),r=Object(n.useCallback)((function(){return t.deleteToDoList(t.id)}),[t.id]),d=Object(n.useCallback)((function(){t.setFilter("all",t.id)}),[t.id]),l=Object(n.useCallback)((function(){t.setFilter("active",t.id)}),[t.id]),u=Object(n.useCallback)((function(){t.setFilter("completed",t.id)}),[t.id]),b=Object(n.useCallback)((function(e){return t.changeTitleTodoList(e,t.id)}),[t.id]),p=Object(n.useCallback)((function(e){return t.addTask(t.id,e)}),[t.id]);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h3",{children:[Object(v.jsx)(L,{title:t.title,changeTitle:b}),Object(v.jsx)(j.a,{onClick:r,disabled:"loading"===t.entityStatys,children:Object(v.jsx)(D.a,{})})]}),Object(v.jsx)(C,{addItem:p,disabled:"loading"===t.entityStatys}),Object(v.jsx)("ul",{style:{listStyle:"none",padding:"0px"},children:o}),Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{size:"small",variant:"all"==t.filter?"outlined":"contained",onClick:d,children:"All"}),Object(v.jsx)(f.a,{size:"small",variant:"active"==t.filter?"outlined":"contained",onClick:l,children:"Active"}),Object(v.jsx)(f.a,{size:"small",variant:"completed"==t.filter?"outlined":"contained",onClick:u,children:"Completed"})]})]})})),kt=a(13),Tt=function(t){Object(n.useEffect)((function(){s(function(){var t=Object(w.a)(A.a.mark((function t(e){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(V({status:"loading"})),t.prev=1,t.next=4,M();case 4:return a=t.sent,e(et({ApiToDoLists:a.data})),e(V({status:"succeeded"})),t.abrupt("return",a.data);case 10:t.prev=10,t.t0=t.catch(1),e(V({status:"failed"}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}())}),[]);var e=Object(k.c)((function(t){return t.todolists})),a=Object(k.c)((function(t){return t.tasks})),i=Object(k.c)((function(t){return t.login.isLoggedIn})),s=Object(k.b)(),o=Object(n.useCallback)((function(t){var e;s((e=t,function(t){t(V({status:"loading"})),N(e).then((function(e){return 0===e.data.resultCode?(t(it({title:e.data.data.item.title,idToDoList:e.data.data.item.id})),t(V({status:"succeeded"}))):X(e.data,t),e})).catch((function(e){Y(e.message,t)})).then((function(t){return console.log(t)}))}))}),[s]),c=Object(n.useCallback)((function(t,e){return s(function(t,e){return function(a){a(V({status:"loading"})),R(e,t).then((function(n){a(nt({title:t,toDoListID:e})),a(V({status:"succeeded"}))}))}}(t,e))}),[]),r=Object(n.useCallback)((function(t){var e;s((e=t,function(t){t(V({status:"loading"})),t(tt({entityStatys:"loading",idToDoList:e})),U(e).then((function(a){t(st({toDoListID:e})),t(V({status:"succeeded"}))})).catch((function(e){Y(e.message,t)}))}))}),[]),d=Object(n.useCallback)((function(t,e){s(at({newFiltervalue:t,toDoListID:e}))}),[]),l=Object(n.useCallback)((function(t,e){return s(function(t,e){return function(a){a(V({status:"loading"})),P(t,e).then((function(t){0===t.data.resultCode?(a(jt({task:t.data.data.item})),a(V({status:"succeeded"}))):X(t.data,a)})).catch((function(t){Y(t.message,a)}))}}(t,e))}),[]),u=Object(n.useCallback)((function(t,e,a){return s(Ot(t,e,{title:a}))}),[]),j=Object(n.useCallback)((function(t,e,a){return s(Ot(t,e,{status:a}))}),[]),b=Object(n.useCallback)((function(t,e){return s(function(t,e){return function(a){a(V({status:"loading"})),a(bt({toDoListId:t,taskId:e,entityTaskStatus:"loading"})),G(t,e).then((function(n){a(ft({todolostId:t,taskId:e})),a(V({status:"succeeded"}))}))}}(t,e))}),[]),f=e.map((function(t){var e=a[t.id];return Object(v.jsx)(g.a,{item:!0,children:Object(v.jsx)(m.a,{elevation:6,style:{padding:"20px"},children:Object(v.jsx)(mt,{entityStatys:t.entityStatys,id:t.id,title:t.title,filter:t.filter,allTask:e,setFilter:d,changeTitleTodoList:c,addTask:l,deleteToDoList:r,removeTask:b,chahgeTaskTitle:u,chahgeTaskStatus:j},t.id)},t.id)},t.id)}));return i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g.a,{container:!0,style:{padding:"20px 0px"},children:Object(v.jsx)(C,{addItem:o})}),Object(v.jsx)(g.a,{container:!0,spacing:5,children:f})]}):Object(v.jsx)(kt.a,{to:"/login"})},xt=a(335),yt=a(332);function vt(t){return Object(v.jsx)(yt.a,Object(I.a)({elevation:6,variant:"filled"},t))}function Ct(){var t=Object(k.b)(),e=Object(k.c)((function(t){return t.app})),a=function(e,a){if("clickaway"===a)return t($({error:null}));t($({error:null}))};return Object(v.jsx)(xt.a,{open:null!==e.error,autoHideDuration:6e3,onClose:a,children:Object(v.jsx)(vt,{onClose:a,severity:"error",children:e.error})})}var Lt=a(41),Dt=a(331),It=a(77),St=F.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"a40d8e19-8ad7-4404-b77e-7dea185478ff"}}),At=function(){return St.get("/auth/me")},wt=function(){return St.delete("/auth/login")},zt=Object(J.b)({name:"LoginSlice",initialState:{isLoggedIn:!1,initialazed:!1},reducers:{isLoggedInAC:function(t,e){t.isLoggedIn=e.payload.isLoggedIn},isInitialazedAC:function(t,e){t.initialazed=e.payload.initialazed}}}),Ft=zt.reducer,Et=zt.actions,Mt=Et.isLoggedInAC,Nt=Et.isInitialazedAC,Rt=function(){var t=Object(k.b)();return Object(k.c)((function(t){return t.login})).isLoggedIn?Object(v.jsx)(kt.a,{to:"/"}):Object(v.jsx)(Lt.d,{initialValues:{email:"",password:"",rememberMe:!1},validationSchema:It.a({email:It.b().email("Invalid email address").required("Required"),password:It.b().max(15,"Must be 15 characters or less").required("Required")}),onSubmit:function(e){var a;t((a=e,function(t){t(V({status:"loading"})),H(a).then((function(e){0===e.data.resultCode?(t(Mt({isLoggedIn:!0})),t(V({status:"succeeded"}))):X(e.data,t)}))}))},children:function(t){t.errors,t.touched;return Object(v.jsx)(Lt.c,{children:Object(v.jsx)(m.a,{elevation:3,style:{padding:"20px"},children:Object(v.jsxs)(g.a,{container:!0,style:{padding:"20px 0px"},children:[Object(v.jsx)(g.a,{container:!0,style:{padding:"10px 0px"},children:Object(v.jsxs)(Dt.a,{margin:1,children:[Object(v.jsx)("label",{htmlFor:"email",children:"enter email: lismgmk2@gmail.com  "}),Object(v.jsx)(Lt.b,{name:"email",type:"text"}),Object(v.jsx)(Lt.a,{name:"email"})]})}),Object(v.jsx)(g.a,{container:!0,style:{padding:"10px 0px"},children:Object(v.jsxs)(Dt.a,{margin:1,children:[Object(v.jsx)("label",{htmlFor:"password",children:"enter password: '12345890'  "}),Object(v.jsx)(Lt.b,{name:"password",type:"password"}),Object(v.jsx)(Lt.a,{name:"password"})]})}),Object(v.jsx)(g.a,{container:!0,style:{padding:"10px 0px"},children:Object(v.jsxs)(Dt.a,{margin:1,children:[Object(v.jsx)("label",{htmlFor:"rememberMe",children:"rememberMe "}),Object(v.jsx)(Lt.b,{type:"checkbox",name:"rememberMe"})]})}),Object(v.jsx)(f.a,{color:"primary",type:"submit",variant:"outlined",children:"Submit"})]})})})}})};var Ut=function(){var t=Object(k.b)();Object(n.useEffect)((function(){t((function(t){t(Nt({initialazed:!0})),At().then((function(e){0===e.data.resultCode?(t(Nt({initialazed:!1})),t(Mt({isLoggedIn:!0}))):(X(e.data,t),t(Nt({initialazed:!1})))})).catch((function(e){Y(e.message,t)}))}))}),[]);var e=Object(n.useCallback)((function(){t((function(t){t(Nt({initialazed:!0})),wt().then((function(e){0===e.data.resultCode?(t(ot({})),t(Mt({isLoggedIn:!1})),t(Nt({initialazed:!1})),t(V({status:"succeeded"}))):(X(e.data,t),t(Nt({initialazed:!1})))})).catch((function(e){Y(e.message,t),t(Nt({initialazed:!1}))}))}))}),[]),a=Object(k.c)((function(t){return t.app}));return Object(k.c)((function(t){return t.login.initialazed}))?Object(v.jsx)(d.a,{color:"secondary"}):Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(Ct,{}),Object(v.jsxs)(l.a,{position:"static",children:[Object(v.jsxs)(u.a,{style:{justifyContent:"space-between"},children:[Object(v.jsx)(j.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(b.a,{variant:"h6",children:"TodoLists"}),Object(v.jsx)(f.a,{variant:"outlined",color:"inherit",onClick:e,children:"LogOut"})]}),"loading"===a.status&&Object(v.jsx)(p.a,{})]}),Object(v.jsx)(O.a,{fixed:!0,children:Object(v.jsxs)(kt.d,{children:[Object(v.jsx)(kt.b,{exact:!0,path:"/",children:Object(v.jsx)(Tt,{})}),Object(v.jsx)(kt.b,{exact:!0,path:"/login",children:Object(v.jsx)(Rt,{})}),Object(v.jsx)(kt.b,{path:"/404",render:function(){return Object(v.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(v.jsx)(kt.a,{from:"*",to:"/404"})]})})]})},qt=a(140),Pt=a(61),Bt=Object(qt.a)({tasks:pt,todolists:ct,app:Q,login:Ft}),Gt=Object(J.a)({reducer:Bt,middleware:function(t){return t().prepend(Pt.a)}});window.store=Gt;var Ht=a(56);o.a.render(Object(v.jsx)(Ht.a,{children:Object(v.jsx)(k.a,{store:Gt,children:Object(v.jsx)(Ut,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},98:function(t,e,a){}},[[285,1,2]]]);
//# sourceMappingURL=main.0b6524c3.chunk.js.map